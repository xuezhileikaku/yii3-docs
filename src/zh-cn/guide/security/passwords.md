# 处理密码

大多数开发人员都知道不能以纯文本形式存储密码，但许多开发人员认为使用 `md5`、`sha1` 或 `sha256` 等哈希密码仍然安全。曾几何时，使用上述哈希算法就足够了，但现代硬件使得使用暴力攻击逆转此类哈希甚至更强的哈希成为可能。

为了为用户密码提供更高的安全性，即使在最坏的情况下（当有人破坏您的应用程序时），您也需要使用能够抵抗暴力攻击的哈希算法。目前最好的选择是 `argon2`。Yii 的 `yiisoft/security` 包使安全生成和验证哈希变得更加容易，并确保使用最佳哈希解决方案。

要使用它，您首先需要安装该包：

```
composer require yiisoft/security
```

当用户首次提供密码时（例如，注册时），需要对密码进行哈希处理并存储：

```php
$hash = (new PasswordHasher())->hash($password);

// 将哈希保存到数据库或其他存储
saveHash($hash);
```

当用户尝试登录时，必须根据之前哈希和存储的密码验证提交的密码：

```php
// 从数据库或其他存储获取哈希
$hash = getHash();

if ((new PasswordHasher())->validate($password, $hash)) {
    // 一切正常，正在登录用户
} else {
    // 密码错误
}
```
