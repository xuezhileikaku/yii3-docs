# 021 — 变更日志和升级

对于所有发布的包,我们都有详细的变更日志和升级指南。

## 变更日志

为每个发布的版本编写变更日志。文件名是 `CHANGELOG.md`。格式如下:

```markdown
# My package Change Log

## 1.0.2 under development

- 本版本中没有更改。

## 1.0.1 March 23, 2021

- Bug #42: 更改的简短描述 (@author1, @author2)

## 1.0.0 February 02, 2021

- 初始发布。
```

其中 "My package" 是包的名称,`1.0.1` 是发布的版本,后跟发布日期。
对于每个版本,都有多行列出更改。
"Bug" 指的是更改类型。
使用以下类型:

- New — 新功能。
- Chg — 一般更改。
- Enh — 现有功能增强。
- Bug — 错误修复。

在变更日志文件中,行应该按 New、Chg、Enh、Bug 排序。

上面的 "#42" 是对应于更改的问题或拉取请求数字。"author1" 是代码作者的 GitHub 昵称。
"author2" 是其他作者。作者的昵称必须以 `@` 为前缀。

## 升级

当存在与上一个版本不兼容的新主要版本时,会创建升级指南。
它描述升级应用程序代码所必需的步骤。

文件名是 `UPGRADE.md`。格式如下:

```markdown
# Upgrading Instructions for my package

此文件包含升级说明。这些说明突出显示在将包从一个版本升级到另一个版本时可能会破坏应用程序的更改。

> **重要!** 以下升级说明是累积的。也就是说,如果您想从版本 A 升级到版本 C,
> 并且 A 和 C 之间有版本 B,您需要遵循 A 和 B 的说明。

## 从 2.x 升级

- 公共方法 `test()` 已被删除。请改用 `perform()`。

## 从 1.x 升级

- 升级后清理缓存。旧缓存与新代码不兼容。
```
